<!DOCTYPE html>
<html lang="en">

<head>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <meta charset="utf-8">
  <title>Gif Tastic</title>
  <style type="text/css">
    button,
    div,
    form,
    input {
      margin: 10px;
    }
    img {
/*    vertical-align: top;
    float:left;
    text-align: center;
*/  width: 100%;
    height: auto;
}
/*img {
    width: 100px;
    height: 100px;
    background-color: grey;
}*/
/*.rating {
    display: block;
    clear: both;
}*/
  </style>
</head>

<body>

  <div class="container">
    <h1>GifTastic</h1>

    <!-- Rendered buttons will get dumped here  -->
    <div id="buttons-view"></div>

    <form id="cat-form">
      <label for="cat-input">Add an Internet Cat</label>
      <input type="text" id="cat-input"><br>

      <!-- Button triggers new movie to be added -->
      <input id="add-cat" type="submit" value="Add an Internet Cat">
    </form>

    <!-- Movies will get dumped Dere -->
    <div id="cat-view" class="row"></div>

    <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript">
      // Initial array of movies
      var kitties = ["Nyan Cat", "Keyboard Cat", "lil Bub", "Grumpy Cat", "Maru", "Pusheen", "Didga", "catzilla", "Long Cat", "Henri cat", "Colonel Meow" ];
      var moving = false;
      var calling ;

      // displayMovieInfo function re-renders the HTML to display the appropriate content
      function displayCatInfo() {

        var kitty = $(this).attr("data-name");
        console.log("kitty var=" + kitty);
        var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + kitty + "&api_key=dc6zaTOxFJmzC";


        // Creates AJAX call for the specific movie button being clicked
        $.ajax({
          url: queryURL,
          method: "GET"
        }).done(function(response) {
          calling = response;
          console.log(response.data[0].images.original.url);


       $('#cat-view').html('' ); 

       $('#cat-view').append("<div id='cat1' class='col-xs-3'>");
       $('#cat1').append('<img id="catpic1" class="catPic" value = '+0+' src=' + response.data[0].images.original_still.url +'>');
       $('#cat1').append('<span class="rating"> Rated: ' + response.data[0].rating +'</span>' );

      $('#cat-view').append("<div id='cat2' class='col-xs-4'>");
       $('#cat2').append('<img class="catPic" value = '+1+' src=' + response.data[1].images.original_still.url +'>' );
       $('#cat2').append('<span class="rating"> Rated: ' + response.data[1].rating +'</span>' );

       $('#cat-view').append("<div id='cat3' class='col-xs-3'>");
       $('#cat3').append('<img class="catPic" value = '+2+' src=' + response.data[2].images.original_still.url +'>' );
       $('#cat3').append('<span class="rating"> Rated: ' + response.data[2].rating +'</span>' );

       $('#cat-view').append("<div id='cat4' class='col-xs-4'>");
       $('#cat4').append('<img class="catPic" value = '+3+' src=' + response.data[3].images.original_still.url +'>' );
       $('#cat4').append('<span class="rating"> Rated: ' + response.data[3].rating +'</span>' );
       
       $('#cat-view').append("<div id='cat5' class='col-xs-3'>");
       $('#cat5').append('<img class="catPic" value = '+4+' src=' + response.data[4].images.original_still.url +'>' );
       $('#cat5').append('<span class="rating"> Rated: ' + response.data[4].rating +'</span>' );

       $('#cat-view').append("<div id='cat6' class='col-xs-4'>");
       $('#cat6').append('<img class="catPic" value = '+5+' src=' + response.data[5].images.original_still.url +'>' );
       $('#cat6').append('<span class="rating"> Rated: ' + response.data[5].rating +'</span>' );

       $('#cat-view').append("<div id='cat7' class='col-xs-3'>");
       $('#cat7').append('<img class="catPic" value = '+6+' src=' + response.data[6].images.original_still.url +'>' );
       $('#cat7').append('<span class="rating"> Rated: ' + response.data[6].rating +'</span>' );

       $('#cat-view').append("<div id='cat8' class='col-xs-4'>");
       $('#cat8').append('<img class="catPic" value = '+7+' src=' + response.data[7].images.original_still.url +'>' );
       $('#cat8').append('<span class="rating"> Rated: ' + response.data[7].rating +'</span>' );

       $('#cat-view').append("<div id='cat9' class='col-xs-3'>");
       $('#cat9').append('<img class="catPic" value = '+8+' src=' + response.data[8].images.original_still.url +'>' );
       $('#cat9').append('<span class="rating"> Rated: ' + response.data[8].rating +'</span>' );

       $('#cat-view').append("<div id='cat10' class='col-xs-4'>");
       $('#cat10').append('<img class="catPic" value = '+9+' src=' + response.data[9].images.original_still.url +'>' );
       $('#cat10').append('<span class="rating"> Rated: ' + response.data[9].rating +'</span>' );


          // Creates a div to hold the movie
          // Retrieves the Rating Data
          // Creates an element to have the rating displayed
          // Displays the rating
          // Retrieves the release year
          // Creates an element to hold the release year
          // Displays the release year
          // Retrieves the plot
          // Creates an element to hold the plot
          // Appends the plot
          // Creates an element to hold the image
          // Appends the image
          // Puts the entire Movie above the previous movies.
        });

      }

      // Function for displaying movie data
            function renderButtons() {
        $("#buttons-view").empty();
        // Delete the content inside the movies-view div prior to adding new movies
        // (this is necessary otherwise you will have repeat buttons)

        // Loop through the array of movies, then generate buttons for each movie in the array
        for (i = 0; i < kitties.length; i++) { 
          console.log(kitties[i]);
        $('#buttons-view').append('<button class="cat" data-name="' + kitties[i] + '">' + kitties[i] + '</button>');

}

      }

      // This function handles events where the add movie button is clicked
      $("#add-cat").on("click", function(event) {
        // event.preventDefault() prevents submit button from trying to send a form.
        // Using a submit button instead of a regular button allows the user to hit
        // "Enter" instead of clicking the button if desired
        event.preventDefault();

        // Write code to grab the text the user types into the input field
        // Write code to add the new movie into the movies array
        var newKitty = $('#cat-input').val().trim();
        console.log(newKitty);
        kitties.push(newKitty);

        // The renderButtons function is called, rendering the list of movie buttons
        renderButtons();
      });

      // function playKittyGif(){

      //   if (moving == false){
      //     $(this.attr("src", calling.data[0].images.original.url));
      //     moving = true;
      //   }
      //   else {
      //     $(this.attr("src", calling.data[0].images.original_still.url));
      //     moving = false;
      //   }
      // }


      // Adding click event listeners to all elements with a class of "movie"
      $(document).on("click", ".cat", displayCatInfo);

      $(document).on("click", ".catPic", function playKittyGif(){
        {

        if (moving == false){
          $(this).attr("src", calling.data[$(this).attr("value")].images.original.url);
          moving = true;
        }
        else {
          $(this).attr("src", calling.data[$(this).attr("value")].images.original_still.url);
          moving = false;
        }
      }
      // console.log($(this).attr("value"));
      });

      // Calling the renderButtons function to display the intial buttons
      renderButtons();
    </script>
  </div>
</body>

</html>
